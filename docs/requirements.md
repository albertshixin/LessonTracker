# 学生课外辅导班课时记录工具 - 需求规格说明书 (MVP)

## 1. 背景 (Why)
我需要开发一款集课时统计、排课管理、智能提醒与打卡记录于一体的移动端应用(ios,android,mobile-web 响应式)，旨在解决家长或学生管理多门课外课程时的痛点。

- **当前遇到的问题**：
    1.  **管理混乱**：课程种类繁多（艺术、体育、学科），且分线上/线下，家长难以统筹。
    2.  **账目不清**：记不清每门课的剩余课时，也不知道“请假”或“缺席”后的课时到底怎么扣（是顺延还是扣费）。
    3.  **遗忘风险**：不同的课有不同的周期（每周/每月），容易忘记上课时间。
    4.  **过程缺失**：上完课后缺乏对上课环境或内容的记录，无法回溯学习状态。

- **为什么现有工具不合适**：
    - 普通日历应用无法记录“剩余课时”这一核心资产。
    - 机构的教务系统无法由家长自定义规则（如请假规则），且无法在一个 App 里管理所有不同机构的课程。

## 2. 使用场景 (When & Who)
- **主要使用者**：学生家长（核心）、自主管理学习的学生。
- **使用频率**：
    - **高频**：每次上课前后（接收提醒、打卡）。
    - **中频**：每周/每月（查看排课计划、购买新课包时录入）。
- **使用环境**：移动端 App 或 微信小程序（需深度调用系统通知和摄像头）。

## 3. 核心功能需求 (What)
系统必须支持以下 4 个核心功能模块：

### 3.1 课时统计与账户管理 (Course Ledger)
管理课程的基础数据，类似于“银行账户”模型。
* **输入字段**：
    * **课程名称**：如“雅马哈钢琴”、“少儿编程”。
    * **上课形式**：单选 [线上 / 线下]。
    * **有效期**：开始日期、结束日期（可选）。
    * **课时数据**：总课时数（如 50节）、已上课时数（初始可填0）、**剩余课时数**（自动计算）。
* **输出展示**：
    * 在首页以卡片形式展示每门课的剩余课时，支持按“剩余不足”进行预警颜色标记。

### 3.2 课程类型与周期规则 (Configuration)
管理课程的分类属性和复杂的排课逻辑。
* **类型标签**：支持自定义或选择标签，如：[运动类]、[艺术类]、[主课类]、[科普类]。
* **周期设置**：
    * 支持设置固定频率：如“每周2次（周三、周六）”、“每月2次（具体日期）”。
    * 支持手动添加无规律排课日期。
* **例外规则（核心）**：
    * 针对该课程设置“错过处理方式”字段，选项包括：
        * **请假**（不扣课时，不计入消耗）。
        * **推迟**（顺延有效期，不扣课时）。
        * **补课**（标记为待办，需手动安排补课时间）。
        * **错过不补**（照常扣除1课时）。

### 3.3 智能提醒系统 (Smart Reminders)
防止用户忘记上课，提供高度自定义的推送服务。
* **触发逻辑**：系统根据“周期设置”自动计算下一次课程时间，并建立提醒任务。
* **自定义配置**：
    * 允许用户对每门课单独设置提醒策略。
    * **提醒时间点**：支持多选组合，如 [提前1天] + [提前1小时] + [提前10分钟]。
    * **提醒方式**：系统推送通知（Push Notification）或 震动/响铃。

### 3.4 富媒体打卡 (Rich Media Check-in)
上课时的执行动作，用于消耗课时并记录过程。
* **触发场景**：用户点击“开始上课”或“上课结束”时。
* **打卡内容**：
    * **扣减确认**：默认扣除 1 课时（支持修改为 0.5 或 2）。
    * **环境记录**：调用摄像头拍照或从相册上传图片。
        * *场景举例*：拍摄线下教室环境、线上课程的软件截图、孩子的画作或作业桌面。
    * **文字备注**：选填（如：今天学习了第三章）。
* **数据处理**：
    * 保存打卡记录后，自动更新“剩余课时”。
    * 图片需关联存储，可在课程详情的历史记录中查看。

